<div *ngIf="event" class="event-details-container">
  <div class="event-header">
    <div class="event-image">
      <img src="./images/hp3.jpg" alt="{{ event.name }}" />
    </div>
    <div class="event-info">
      <h2 class="event-name">{{ event.name }}</h2>
      <p class="event-artists">
        Artists: {{ event.artist_names.join(", ") || "Unknown" }}
      </p>
      <p class="event-duration">
        Duration: {{ event.duration || "Event duration not available" }}
      </p>
      <p class="event-description">
        {{ event.description || "No description available." }}
      </p>
      @if(role=="Admin"){
      <div class="moderation-controls">
        <p>{{ status }}</p>
        <p-toggleswitch
          [(ngModel)]="checked"
          (ngModelChange)="onToggle($event)"
          onLabel="Blocked"
          offLabel="Active"
          [disabled]="role !== 'Admin'"
        />
      </div>
      } @if(role=="Host" && !event.is_blocked){
      <p-button
        label="Add Show"
        severity="success"
        (onClick)="addShowDialog.open()"
      />
      <app-add-show-dialog
        #addShowDialog
        [eventID]="event.id"
        (showAdded)="refreshShows()"
      >
      </app-add-show-dialog>
      }
    </div>
  </div>

  @if(!checked){
  <div class="date-filter-container">
    <div class="date-pills">
      <button
        *ngFor="let date of availableDates"
        pButton
        type="button"
        class="date-pill"
        [class.selected]="date === selectedDate"
        (click)="selectDate(date)"
      >
        {{ date | date : "EEE, MMM d" }}
      </button>
    </div>

    <div class="price-filter-section">
      <div class="price-filter">
        <span class="price-label min-price">₹{{ rangeValues[0] }}</span>
        <div class="slider-container">
          <p-slider
            [(ngModel)]="rangeValues"
            [range]="true"
            [min]="0"
            [max]="3000"
            [step]="100"
            class="price-slider"
          >
          </p-slider>
        </div>
        <span class="price-label max-price">₹{{ rangeValues[1] }}</span>
        <button
          pButton
          icon="pi pi-refresh"
          class="refresh-btn"
          (click)="refreshShows()"
          [attr.aria-label]="'Refresh shows'"
        ></button>
      </div>
    </div>
  </div>

  <app-shows
    *ngIf="!refreshing"
    [shows]="shows"
    [selectedDate]="selectedDate"
    [priceRange]="rangeValues"
  >
  </app-shows>

  <div *ngIf="refreshing" class="loading">
    <p>Refreshing shows...</p>
  </div>
  }
</div>
