<p-dialog
  header="Host a show at your venue"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '40vw' }"
  (onHide)="close()"
  [closable]="false"
>
  <form (ngSubmit)="submit(addShowForm)" #addShowForm="ngForm" class="add-show-form">
    <div class="form-field">
      <label for="venueSelect">Venue</label>
      <p-dropdown
        [options]="venues"
        optionLabel="name"
        optionValue="id"
        [(ngModel)]="newShow.venue_id"
        name="venue"
        id="venueSelect"
        #venueCtrl="ngModel"
        placeholder="Select venue"
        required
      ></p-dropdown>
      <div class="error-slot">
        <small
          class="error-message"
          *ngIf="venueCtrl.invalid && venueCtrl.touched"
        >
          Venue selection is required.
        </small>
      </div>
    </div>

    <div class="form-field">
      <label for="ticketPrice">Ticket Price</label>
      <p-inputNumber
        [(ngModel)]="newShow.price"
        name="price"
        #priceCtrl="ngModel"
        inputId="ticketPrice"
        mode="currency"
        currency="INR"
        locale="en-IN"
        [min]="1"
        required
      ></p-inputNumber>
      <div class="error-slot">
        <small
          class="error-message"
          *ngIf="priceCtrl.touched && priceCtrl.errors?.['required']"
        >
          Ticket price can't be empty.
        </small>
        <small
          class="error-message"
          *ngIf="priceCtrl.touched && priceCtrl.errors?.['min']"
        >
          Ticket price must be at least â‚¹1.
        </small>
      </div>
    </div>

    <div class="form-field">
      <label for="showDate">Show Date & Time</label>
      <p-datepicker
        [(ngModel)]="selectedDate"
        name="showDate"
        #dateCtrl="ngModel"
        inputId="showDate"
        [showTime]="true"
        hourFormat="24"
        [minDate]="minDate"
        placeholder="Select date & time"
        required
        appendTo="body"
      ></p-datepicker>
      <div class="error-slot">
        <small
          class="error-message"
          *ngIf="dateCtrl.invalid && dateCtrl.touched"
        >
          Show date and time are required.
        </small>
      </div>
    </div>

    <div class="dialog-actions">
      <button
        pButton
        label="Cancel"
        class="p-button-text"
        type="button"
        (click)="close()"
      ></button>
      <button
        pButton
        label="Submit"
        class="p-button-success"
        type="submit"
        [disabled]="addShowForm.invalid"
      ></button>
    </div>
  </form>
</p-dialog>
