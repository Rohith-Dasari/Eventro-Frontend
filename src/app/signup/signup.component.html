<div class="signup-page">
  <div class="left-side">
    <app-auth-layout></app-auth-layout>
  </div>

  <div class="right-side">
    <div class="brand">
    <div class="brand-name">EVENTRO </div>
    <p class="caption">Your gateway to amazing events</p>
    </div>
    <div class="signup-form">
      <h2>Create Account</h2>
      <form #signupForm="ngForm" (ngSubmit)="onSignup()" novalidate>
        
        <div class="form-field">
          <input 
            pInputText
            [(ngModel)]="username" 
            name="username" 
            placeholder="Username" 
            required 
            #usernameModel="ngModel"
            class="w-full" />
          <div class="error" *ngIf="usernameModel.invalid && usernameModel.touched">
            Username cannot be blank
          </div>
        </div>

        <div class="form-field">
          <input 
            pInputText
            type="email"
            [(ngModel)]="email" 
            name="email" 
            placeholder="Email" 
            required 
            #emailModel="ngModel"
            class="w-full" />
          <div class="error" *ngIf="emailModel.invalid && emailModel.touched && email.length > 0">
            <span *ngIf="!isValidEmail(email)">Invalid email address</span>
          </div>
        </div>

        <div class="form-field">
          <div class="phone-input-container">
            <span class="country-code">+91</span>
            <input 
              pInputText
              type="text"
              [(ngModel)]="phoneNumber" 
              name="phoneNumber" 
              placeholder="Phone Number" 
              required 
              (input)="onPhoneInput($event)"
              maxlength="10"
              #phoneModel="ngModel"
              class="phone-input" />
          </div>
          <div class="error" *ngIf="phoneModel.invalid && phoneModel.touched && phoneNumber.length > 0">
            <span *ngIf="!isValidPhone(phoneNumber)">Phone number should be exactly 10 digits</span>
            <span *ngIf="phoneNumber.length === 0">Phone number cannot be blank</span>
          </div>
        </div>

        <div class="form-field">
          <p-password 
            [(ngModel)]="password" 
            name="password" 
            placeholder="Password" 
            required
            [toggleMask]="password.length > 0"
            [feedback]="false"
            #passwordModel="ngModel"
            inputStyleClass="w-full"
            styleClass="w-full">
          </p-password>
          <div class="error" *ngIf="passwordModel.invalid && passwordModel.touched && password.length > 0">
            <span *ngIf="!isValidPassword(password)">Password should be at least 12 alphanumeric characters with at least one special character. Ex: MyPassword123!</span>
            <span *ngIf="password.length === 0">Password cannot be blank</span>
          </div>
        </div>

        <div class="error signup-error" *ngIf="signupError">
          {{ signupError }}
        </div>

        <p-button 
          type="submit" 
          label="{{ loading ? 'Please wait...' : 'Sign Up' }}"
          [disabled]="loading || !username || !isValidEmail(email) || !isValidPhone(phoneNumber) || !isValidPassword(password)"
          [loading]="loading"
          styleClass="w-full signup-btn">
        </p-button>

        <p class="login-link">Already a user? <a routerLink="/login">Log in Here</a></p>
      </form>
    </div>
  </div>
</div>
